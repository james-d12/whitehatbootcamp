<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP Challenge</title>
</head>
<body>
    
    <button onclick="RunAssignment();"> Run Assignment </button>
</body>

<script>

    function RunAssignment(){
        let id = ""
        const name = "james"

        fetch(`https://http-challenge.multiverse-coaches.io/apprentices`, { 
            method: 'POST', 
            headers: { 
                "Accept": "application/json",   
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ name: name }),
        }).then(response => {
            response.text().then(text => {
                const id = text.match(/(?<=\/)[a-zA-Z0-9]+(?=')/)[0];

                fetch(`https://http-challenge.multiverse-coaches.io/apprentices/${id}`, {
                    method: "GET",
                    headers: { 
                        "Accept": "application/json",   
                        'Content-Type': 'application/json'
                    }
                }).then(response => {
                    response.text().then(text => {
                        console.log(text);
                    })
                }).catch(err => {
                    console.log(`Failed to get URL with Error: ${err.message}`);
                })

            })
        }).catch(err => {
            console.log(`Failed to get URL with Error: ${err.message}`);
        })

    }

</script>


</html>